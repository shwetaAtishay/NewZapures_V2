@using NewZapures_V2.Models;
@{

    var permissions = Session["UserPermissions"] as List<UserPermissions>;

    //if (permissions.Count <= 0)
    //{
    //    return @Url.Action("authentication", "login-alt");
    //}
}

<div class="leftbar-tab-menu">
    <div class="main-icon-menu slimscroll-menu d-none">
        <a href="#" class="logo logo-metrica d-block text-center">
            <span>
                <img src="~/images/NOCIMAGE.png" alt="logo-small" class="logo-sm">
            </span>
        </a>
        <nav class="nav">

            @*<a href="#MetricaDashboard" class="nav-link active" data-toggle="tooltip-custom" data-placement="right" data-trigger="hover" title="" data-original-title="Dashboard">
                <i data-feather="home" class="align-self-center menu-icon icon-dual"></i>
            </a>*@<!--end MetricaDashboards-->




        </nav><!--end nav-->
    </div><!--end main-icon-menu-->

    <div class="main-menu-inner ">
        <!-- LOGO -->
        <div class="topbar-left topbar-left-img-logo">
            <a href="#" class="logo">
                <span>
                    <img src="~/images/NOCIMAGE.png" alt="logo-large" class="logo-lg logo-dark" style="width: 50%;height: auto;margin-top: 10%;">
                    <img src="~/images/NOCIMAGE.png" alt="logo-large" class="logo-lg logo-light">
                </span>
            </a>
        </div>
        <!--end logo-->
        <div class="menu-body slimscroll d-none">

            @{
                if (permissions != null)
                {
                    foreach (var item in permissions.Select(p => new { p.Menu, p.MenuId }).Distinct())
                    {
                        <div id="MetricaDashboard" class="main-icon-menu-pane active">
                            <div class="title-box">
                                <h6 class="menu-title active">@item.Menu</h6>
                            </div>
                            @foreach (var item1 in permissions.Where(p => p.MenuId == item.MenuId).ToList())
                            {
                                <ul class="nav">
                                    <li class="nav-item"><a class="nav-link" href="@Url.Action(item1.ActionMethod, item1.Controller)">@item1.SubMenu</a></li>
                                </ul>
                            }
                        </div><!-- end Dashboards -->
                    }
                }
            }

        </div><!--end menu-body-->




        <div class="menu-body px-0 slimscroll">

            @{
                if (permissions != null)
                {
                    foreach (var item in permissions.Select(p => new { p.Menu, p.MenuId }).Distinct())
                    {
                        <div id="MetricaDashboard" class="main-icon-menu-pane active">
                            <div class="accordion dashb-menu" id="accordion-menu">
                                <div class="card">
                                    <div class="title-box card-header p-0" id="accord-profile">
                                        <h6 class="menu-title active m-0">
                                            <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapse_@item.MenuId" aria-expanded="true" aria-controls="collapseOne">
                                                <i class="fas fa-user"></i> @item.Menu
                                                <i class="fas fa-angle-left"></i>
                                            </button>
                                        </h6>
                                    </div>

                                    @foreach (var item1 in permissions.Where(p => p.MenuId == item.MenuId).ToList())
                                    {

                                        <div id="collapse_@item.MenuId" class="collapse" aria-labelledby="accord-profile" data-parent="#accordion-menu">
                                            <div class="card-body">
                                                <ul class="nav">
                                                    <li class="nav-item"><a class="nav-link" href="@Url.Action(item1.ActionMethod, item1.Controller)"><i class="far fa-circle"></i> @item1.SubMenu</a></li>
                                                </ul>
                                            </div>
                                            
                                        </div>

                                    }
                                </div><!-- end Accordion -->
                            </div><!-- end Dashboards -->
                        </div><!--end menu-body-->
                    }

                }

            }
        </div>
    </div><!-- end main-menu-inner-->
</div>

